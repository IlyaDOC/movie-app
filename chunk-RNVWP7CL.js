import{$ as G,A as d,B as U,C as R,D as r,E as s,F as p,G as k,I as _,J as D,L as M,O as L,P as H,Q as W,S as q,a as B,ca as J,e as F,ea as A,g as x,i as S,j as y,k as h,l as $,m as g,n as v,o as z,p as N,q as a,r as j,s as m,sa as Q,t as l,u as V,ua as X,v as t,va as Y,w as i,wa as Z,x as K,xa as ee,y as T,ya as te,z as c}from"./chunk-GVHCGSNU.js";var P=class o{profession="";filmCount=0;isActive=!1;filterSelected=new z;translatedStaffProfessions={ACTOR:"\u0410\u043A\u0442\u0435\u0440",PRODUCER:"\u041F\u0440\u043E\u0434\u044E\u0441\u0435\u0440",DIRECTOR:"\u0420\u0435\u0436\u0438\u0441\u0441\u0435\u0440",WRITER:"\u0421\u0446\u0435\u043D\u0430\u0440\u0438\u0441\u0442",HRONO_TITR_MALE:"\u0410\u043A\u0442\u0435\u0440: \u0425\u0440\u043E\u043D\u0438\u043A\u0430, \u0432 \u0442\u0438\u0442\u0440\u0430\u0445 \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D",HIMSELF:"\u0410\u043A\u0442\u0435\u0440, \u0438\u0433\u0440\u0430\u0435\u0442 \u0441\u0430\u043C\u043E\u0433\u043E \u0441\u0435\u0431\u044F"};constructor(){}ngOnInit(){}selectFilter(){this.filterSelected.emit(this.profession)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-staff-film-filter"]],inputs:{profession:"profession",filmCount:"filmCount",isActive:"isActive"},outputs:{filterSelected:"filterSelected"},decls:4,vars:4,consts:[[1,"filter__item","info-block",3,"click"]],template:function(e,f){e&1&&(t(0,"div",0),c("click",function(){return f.selectFilter()}),r(1),t(2,"span"),r(3),i()()),e&2&&(V("active",f.isActive),a(),p(" ",f.translatedStaffProfessions[f.profession]," "),a(2),s(f.filmCount))},styles:["[_ngcontent-%COMP%]:root{--color-white: #E8E8E8;--color-gray: #666666;--color-green: #3DD2CC;--color-bg: #000000;--color-bg-secondary: #121212;--transition-style: all .3s ease;--color-purple: #6200EE}.filter__item[_ngcontent-%COMP%]{white-space:nowrap}.filter__item.active[_ngcontent-%COMP%]{background-color:var(--color-gray);color:var(--color-bg)}.filter__item.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:var(--color-bg);color:var(--color-white)}.filter__item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-size:14px;color:var(--color-bg);padding:5px;background:var(--color-white);border-radius:3px;margin-left:5px}"]})};var I=class o{transform(n){if(!n)return"";let e=n%10,f=n%100;if(e>11&&e<=19)return`${n} \u043B\u0435\u0442`;switch(e){case 1:return`${n} \u0433\u043E\u0434`;case 2:case 3:case 4:return`${n} \u0433\u043E\u0434\u0430`;default:return`${n} \u043B\u0435\u0442`}}static \u0275fac=function(e){return new(e||o)};static \u0275pipe=$({name:"ageFormat",type:o,pure:!0})};function re(o,n){if(o&1&&(t(0,"div",29)(1,"div",30),r(2,"\u0414\u0430\u0442\u0430 \u0441\u043C\u0435\u0440\u0442\u0438"),i(),t(3,"div",31),r(4),_(5,"date"),i()()),o&2){let e=d(2);a(4),s(M(5,1,e.staffInfo.death,"dd MMMM, yyyy","","ru-Ru"))}}function fe(o,n){if(o&1&&(t(0,"div",29)(1,"div",30),r(2,"\u041C\u0435\u0441\u0442\u043E \u0441\u043C\u0435\u0440\u0442\u0438"),i(),t(3,"div",31),r(4),i()()),o&2){let e=d(2);a(4),s(e.staffInfo.deathplace)}}function se(o,n){o&1&&(t(0,"div",38),r(1,"\u0412 \u0440\u0430\u0437\u0432\u043E\u0434\u0435"),i())}function le(o,n){if(o&1&&(t(0,"div",31)(1,"div",34)(2,"div",35),r(3),i(),t(4,"div",36),r(5),i(),m(6,se,2,0,"div",37),i()()),o&2){let e=n.$implicit;a(3),s(e.name),a(2),p("\u0414\u0435\u0442\u0435\u0439: ",e.children,""),a(),l("ngIf",e.divorced)}}function pe(o,n){if(o&1&&(t(0,"div",28)(1,"div",29)(2,"div",30),r(3,"\u041A\u0430\u0440\u044C\u0435\u0440\u0430"),i(),t(4,"div",31),r(5),i()(),t(6,"div",29)(7,"div",30),r(8,"\u0420\u043E\u0441\u0442"),i(),t(9,"div",31),r(10),i()(),t(11,"div",29)(12,"div",30),r(13,"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F"),i(),t(14,"div",31),r(15),_(16,"date"),t(17,"span"),r(18),_(19,"ageFormat"),i()()(),t(20,"div",29)(21,"div",30),r(22,"\u041C\u0435\u0441\u0442\u043E \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F"),i(),t(23,"div",31),r(24),i()(),m(25,re,6,6,"div",32)(26,fe,5,1,"div",32),t(27,"div",29)(28,"div",30),r(29),i(),m(30,le,7,3,"div",33),i()()),o&2){let e=d();a(5),p("",e.staffInfo.profession,"\u0442"),a(5),p("",e.staffInfo.growth/100," \u043C"),a(5),p("",M(16,9,e.staffInfo.birthday,"dd MMMM, yyyy","","ru-Ru")," \u2022 "),a(3),s(D(19,14,e.staffInfo.age)),a(6),s(e.staffInfo.birthplace),a(),l("ngIf",e.staffInfo.death),a(),l("ngIf",e.staffInfo.deathplace),a(3),s(e.spouseType),a(),l("ngForOf",e.staffInfo.spouses)}}function me(o,n){if(o&1&&(t(0,"div",40),r(1),i()),o&2){let e=d().$implicit;a(),s(e)}}function ce(o,n){o&1&&m(0,me,2,1,"ng-template",39)}function de(o,n){if(o&1){let e=T();t(0,"app-staff-film-filter",41),c("filterSelected",function(u){g(e);let C=d();return v(C.setActiveFilter(u))}),i()}if(o&2){let e=n.$implicit,f=d();l("profession",e)("filmCount",f.groupedFilms[e].length)("isActive",e===f.activeFilter())}}function ue(o,n){if(o&1&&(t(0,"div",42)(1,"div",43)(2,"p"),r(3),i()(),t(4,"div",44),r(5),i(),t(6,"div",45),r(7),i(),t(8,"a",46),r(9,"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"),i()()),o&2){let e=n.$implicit;a(3),k("",e.nameRu," (",e.nameEn,")"),a(2),p("\u0420\u0435\u0439\u0442\u0438\u043D\u0433: ",e.rating,""),a(2),p("\u0420\u043E\u043B\u044C: ",e.description,""),a(),l("routerLink","/film/"+e.filmId)}}var E=class o{staffService=S(X);activatedRoute=S(G);_snackBar=S(Q);staffInfo;destroy$=new B;showMore=!1;moreInfoButtonText="\u0412\u0441\u0435 \u0434\u0435\u0442\u0430\u043B\u0438 \u043E \u043F\u0435\u0440\u0441\u043E\u043D\u0435";spouseType="";groupedFilms={};staffProfessions=[];staffFactsCarouselOptions={mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,margin:20,responsive:{0:{items:1},500:{items:2}}};activeFilter=j("");constructor(){this.staffInfo={personId:0,webUrl:"",nameRu:"",nameEn:"",sex:"",posterUrl:"",growth:0,birthday:"",death:"",age:0,birthplace:"",deathplace:"",hasAwards:0,profession:"",facts:[""],spouses:[{personId:0,name:"",divorced:!1,divorcedReason:"",sex:"",children:0,webUrl:"",relation:""}],films:[{filmId:0,nameRu:"",nameEn:"",rating:"",general:!1,description:"",professionKey:""}]}}ngOnInit(){this.activatedRoute.params.pipe(F(this.destroy$)).subscribe(n=>{this.getStaffInfoData(n.staffId)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getStaffInfoData(n){this.staffService.getStaffInfo(n).pipe(F(this.destroy$)).subscribe({next:e=>{this.catchErrorInResponse(e),this.staffInfo=e,this.spouseType=this.staffInfo.sex==="MALE"?"\u0421\u0443\u043F\u0440\u0443\u0433\u0430":"\u0421\u0443\u043F\u0440\u0443\u0433",this.groupFilmsByProfession(),this.staffProfessions=Array.from(new Set(this.staffInfo.films.map(f=>f.professionKey))),this.activeFilter.set(this.staffProfessions[0])},error:e=>{e.error&&e.error.message?this._snackBar.open(e.error.message):this._snackBar.open("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445")}})}catchErrorInResponse(n){let e=null;if(n.message!==void 0&&(e=n.message),e)throw this._snackBar.open(e),new Error(e)}showMoreAction(){this.showMore=!this.showMore,this.moreInfoButtonText=this.showMore?"\u0421\u043A\u0440\u044B\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u0438":"\u0412\u0441\u0435 \u0434\u0435\u0442\u0430\u043B\u0438 \u043E \u043F\u0435\u0440\u0441\u043E\u043D\u0435"}groupFilmsByProfession(){this.staffInfo.films&&this.staffInfo.films.length>0&&(this.groupedFilms=this.staffInfo.films.reduce((n,e)=>(n[e.professionKey]||(n[e.professionKey]=[]),n[e.professionKey].push(e),n),{}))}setActiveFilter(n){this.activeFilter.set(n)}getFilteredFilms(){}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-staff-page"]],decls:42,vars:20,consts:[["OwlCarStaffFacts",""],[1,"staff"],[1,"container"],[1,"staff__inner"],[1,"staff__main"],[1,"staff__main-image"],["alt","Staff photo",3,"src"],[1,"staff__main-info"],[1,"staff__name"],[1,"staff__profession"],[1,"staff__birthdate"],[1,"staff__growth"],["class","staff__more-info",4,"ngIf"],[1,"btn","more-info",3,"click"],[1,"staff__facts"],[1,"staff__facts-title"],[1,"carousel-arrows"],[1,"pi","pi-arrow-left",2,"font-size","18px",3,"click"],[1,"pi","pi-arrow-right",2,"font-size","18px",3,"click"],[1,"staff__facts-items"],[3,"options"],[4,"ngFor","ngForOf"],[1,"staff__films"],[1,"staff__films-title"],[1,"staff__films-filter"],[3,"profession","filmCount","isActive","filterSelected",4,"ngFor","ngForOf"],[1,"staff__films-items"],["class","film-item",4,"ngFor","ngForOf"],[1,"staff__more-info"],[1,"info-item"],[1,"info-item__name"],[1,"info-item__value"],["class","info-item",4,"ngIf"],["class","info-item__value",4,"ngFor","ngForOf"],[1,"spouse"],[1,"spouse__name"],[1,"spouse__children"],["class","spouse__divorced",4,"ngIf"],[1,"spouse__divorced"],["carouselSlide",""],[1,"staff__facts-item","info-block"],[3,"filterSelected","profession","filmCount","isActive"],[1,"film-item"],[1,"film-item__name"],[1,"film-item__rating"],[1,"film-item__role"],[3,"routerLink"]],template:function(e,f){if(e&1){let u=T();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),K(5,"img",6),i(),t(6,"div",7)(7,"div",8)(8,"p"),r(9),i(),t(10,"p"),r(11),i()(),t(12,"div",9),r(13),i(),t(14,"div",10)(15,"span"),r(16),_(17,"date"),_(18,"ageFormat"),i()(),t(19,"div",11),r(20),i()(),m(21,pe,31,16,"div",12),t(22,"button",13),c("click",function(){return g(u),v(f.showMoreAction())}),r(23),i()(),t(24,"div",14)(25,"div",15)(26,"span"),r(27,"\u0417\u043D\u0430\u0435\u0442\u0435 \u043B\u0438 \u0432\u044B, \u0447\u0442\u043E\u2026"),i(),t(28,"div",16)(29,"i",17),c("click",function(){g(u);let b=R(33);return v(b.prev())}),i(),t(30,"i",18),c("click",function(){g(u);let b=R(33);return v(b.next())}),i()()(),t(31,"div",19)(32,"owl-carousel-o",20,0),m(34,ce,1,0,null,21),i()()(),t(35,"div",22)(36,"div",23),r(37,"\u0424\u0438\u043B\u044C\u043C\u043E\u0433\u0440\u0430\u0444\u0438\u044F"),i(),t(38,"div",24),m(39,de,1,3,"app-staff-film-filter",25),i(),t(40,"div",26),m(41,ue,10,5,"div",27),i()()()()()}e&2&&(a(5),U("src",f.staffInfo.posterUrl,N),a(4),s(f.staffInfo.nameRu),a(2),s(f.staffInfo.nameEn),a(2),p(" ",f.staffInfo.profession," "),a(3),k("",M(17,13,f.staffInfo.birthday,"dd MMMM, yyyy","","ru-Ru")," \u2022 ",D(18,18,f.staffInfo.age),""),a(4),p("",f.staffInfo.growth/100," \u043C"),a(),l("ngIf",f.showMore),a(2),s(f.moreInfoButtonText),a(9),l("options",f.staffFactsCarouselOptions),a(2),l("ngForOf",f.staffInfo.facts),a(5),l("ngForOf",f.staffProfessions),a(2),l("ngForOf",f.groupedFilms[f.activeFilter()]))},dependencies:[L,H,J,Z,Y,P,W,I],styles:["[_ngcontent-%COMP%]:root{--color-white: #E8E8E8;--color-gray: #666666;--color-green: #3DD2CC;--color-bg: #000000;--color-bg-secondary: #121212;--transition-style: all .3s ease;--color-purple: #6200EE}.staff[_ngcontent-%COMP%]{padding-top:var(--container);max-width:744px;margin:0 auto}@media (min-width: 1600px){.staff[_ngcontent-%COMP%]{padding-top:20px}}.staff__main[_ngcontent-%COMP%]{display:grid}.staff__main-image[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.staff__main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:70%;border-radius:5px}@media (min-width: 744px){.staff__main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px}}.staff__main-info[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;gap:10px;margin-bottom:20px}.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]{display:grid;gap:20px}.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-size:20px}@media (min-width: 744px){.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-size:30px}}.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{font-size:15px}.staff__more-info[_ngcontent-%COMP%]{display:grid;gap:16px;margin-bottom:20px}.staff__more-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:120px 1fr}.staff__more-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:nth-child(3)   .info-item__value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.staff__more-info[_ngcontent-%COMP%]   .info-item__name[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--color-gray)}.staff__more-info[_ngcontent-%COMP%]   .info-item__value[_ngcontent-%COMP%]   .spouse[_ngcontent-%COMP%]{display:grid;gap:5px}.staff__more-info[_ngcontent-%COMP%]   .info-item__value[_ngcontent-%COMP%]   .spouse__children[_ngcontent-%COMP%], .staff__more-info[_ngcontent-%COMP%]   .info-item__value[_ngcontent-%COMP%]   .spouse__divorced[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.more-info[_ngcontent-%COMP%]{justify-self:center}.staff__facts-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:16px 0 20px}.staff__facts-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}.staff__facts-title[_ngcontent-%COMP%]   .carousel-arrows[_ngcontent-%COMP%]{display:flex;align-items:center;gap:30px}.staff__facts-items[_ngcontent-%COMP%]   .staff__facts-item[_ngcontent-%COMP%]{overflow-y:auto;min-height:120px;max-height:120px}.staff__films-title[_ngcontent-%COMP%]{font-size:20px;margin-bottom:16px}.staff__films-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-wrap:nowrap;overflow-x:auto;margin-bottom:16px}.staff__films-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.staff__films-items[_ngcontent-%COMP%]   .film-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;background-color:var(--color-bg-secondary);border-radius:5px;padding:10px}.staff__films-items[_ngcontent-%COMP%]   .film-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:15px;text-decoration:underline}"]})};var _e=[{path:"staff/:staffId",component:E}],w=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=h({type:o});static \u0275inj=x({imports:[A.forChild(_e),A]})};var ie=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=h({type:o});static \u0275inj=x({imports:[q,w,ee,te]})};export{ie as a};
