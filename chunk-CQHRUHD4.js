import{A as _,B as p,C as V,D as F,E as r,F as m,G as c,H as T,J as u,K as R,M as h,P as K,Q as U,R as L,T as H,a as D,aa as W,da as q,e as w,fa as k,g,i as v,j as x,k as C,l as A,m as S,n as y,o as B,q as $,r as o,s as z,t as l,ta as G,u as s,v as N,va as J,w as a,wa as Q,x as n,xa as X,y as j,ya as Y,z as b,za as Z}from"./chunk-3QW3CN2Z.js";var P=class e{profession="";filmCount=0;isActive=!1;filterSelected=new B;translatedStaffProfessions={ACTOR:"\u0410\u043A\u0442\u0435\u0440",PRODUCER:"\u041F\u0440\u043E\u0434\u044E\u0441\u0435\u0440",DIRECTOR:"\u0420\u0435\u0436\u0438\u0441\u0441\u0435\u0440",WRITER:"\u0421\u0446\u0435\u043D\u0430\u0440\u0438\u0441\u0442",HRONO_TITR_MALE:"\u0410\u043A\u0442\u0435\u0440: \u0425\u0440\u043E\u043D\u0438\u043A\u0430, \u0432 \u0442\u0438\u0442\u0440\u0430\u0445 \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D",HIMSELF:"\u0410\u043A\u0442\u0435\u0440, \u0438\u0433\u0440\u0430\u0435\u0442 \u0441\u0430\u043C\u043E\u0433\u043E \u0441\u0435\u0431\u044F"};constructor(){}ngOnInit(){}selectFilter(){this.filterSelected.emit(this.profession)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=x({type:e,selectors:[["app-staff-film-filter"]],inputs:{profession:"profession",filmCount:"filmCount",isActive:"isActive"},outputs:{filterSelected:"filterSelected"},decls:4,vars:4,consts:[[1,"filter__item","info-block",3,"click"]],template:function(t,f){t&1&&(a(0,"div",0),_("click",function(){return f.selectFilter()}),r(1),a(2,"span"),r(3),n()()),t&2&&(N("active",f.isActive),o(),c(" ",f.translatedStaffProfessions[f.profession]," "),o(2),m(f.filmCount))},styles:["[_ngcontent-%COMP%]:root{--color-white: #E8E8E8;--color-gray: #666666;--color-green: #3DD2CC;--color-bg: #000000;--color-bg-secondary: #121212;--transition-style: all .3s ease;--color-purple: #6200EE}.filter__item[_ngcontent-%COMP%]{white-space:nowrap}.filter__item.active[_ngcontent-%COMP%]{background-color:var(--color-gray);color:var(--color-bg)}.filter__item.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:var(--color-bg);color:var(--color-white)}.filter__item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-size:14px;color:var(--color-bg);padding:5px;background:var(--color-white);border-radius:3px;margin-left:5px}"]})};var M=class e{transform(i){if(!i)return"";let t=i%10,f=i%100;if(t>11&&t<=19)return`${i} \u043B\u0435\u0442`;switch(t){case 1:return`${i} \u0433\u043E\u0434`;case 2:case 3:case 4:return`${i} \u0433\u043E\u0434\u0430`;default:return`${i} \u043B\u0435\u0442`}}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=A({name:"ageFormat",type:e,pure:!0})};function at(e,i){if(e&1&&(a(0,"div",21),r(1),n()),e&2){let t=p();o(),c("",t.staffInfo.growth/100," \u043C")}}function rt(e,i){if(e&1&&(a(0,"div",23)(1,"div",24),r(2,"\u0420\u043E\u0441\u0442"),n(),a(3,"div",25),r(4),n()()),e&2){let t=p(2);o(4),c("",t.staffInfo.growth/100," \u043C")}}function ft(e,i){if(e&1&&(a(0,"div",23)(1,"div",24),r(2,"\u0414\u0430\u0442\u0430 \u0441\u043C\u0435\u0440\u0442\u0438"),n(),a(3,"div",25),r(4),u(5,"date"),n()()),e&2){let t=p(2);o(4),m(h(5,1,t.staffInfo.death,"dd MMMM, yyyy","","ru-Ru"))}}function st(e,i){if(e&1&&(a(0,"div",23)(1,"div",24),r(2,"\u041C\u0435\u0441\u0442\u043E \u0441\u043C\u0435\u0440\u0442\u0438"),n(),a(3,"div",25),r(4),n()()),e&2){let t=p(2);o(4),m(t.staffInfo.deathplace)}}function lt(e,i){e&1&&(a(0,"div",32),r(1,"\u0412 \u0440\u0430\u0437\u0432\u043E\u0434\u0435"),n())}function pt(e,i){if(e&1&&(a(0,"div",25)(1,"div",28)(2,"div",29),r(3),n(),a(4,"div",30),r(5),n(),l(6,lt,2,0,"div",31),n()()),e&2){let t=i.$implicit;o(3),m(t.name),o(2),c("\u0414\u0435\u0442\u0435\u0439: ",t.children,""),o(),s("ngIf",t.divorced)}}function mt(e,i){if(e&1&&(a(0,"div",23)(1,"div",24),r(2),n(),l(3,pt,7,3,"div",27),n()),e&2){let t=p(2);o(2),m(t.spouseType),o(),s("ngForOf",t.staffInfo.spouses)}}function ct(e,i){if(e&1&&(a(0,"div",22)(1,"div",23)(2,"div",24),r(3,"\u041A\u0430\u0440\u044C\u0435\u0440\u0430"),n(),a(4,"div",25),r(5),n()(),l(6,rt,5,1,"div",26),a(7,"div",23)(8,"div",24),r(9,"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F"),n(),a(10,"div",25),r(11),u(12,"date"),a(13,"span"),r(14),u(15,"ageFormat"),n()()(),a(16,"div",23)(17,"div",24),r(18,"\u041C\u0435\u0441\u0442\u043E \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F"),n(),a(19,"div",25),r(20),n()(),l(21,ft,6,6,"div",26)(22,st,5,1,"div",26)(23,mt,4,2,"div",26),n()),e&2){let t=p();o(5),c("",t.staffInfo.profession,"\u0442"),o(),s("ngIf",t.staffInfo.growth>0),o(5),c("",h(12,8,t.staffInfo.birthday,"dd MMMM, yyyy","","ru-Ru")," \u2022 "),o(3),m(R(15,13,t.staffInfo.age)),o(6),m(t.staffInfo.birthplace),o(),s("ngIf",t.staffInfo.death),o(),s("ngIf",t.staffInfo.deathplace),o(),s("ngIf",t.staffInfo.spouses.length>0)}}function dt(e,i){if(e&1&&(a(0,"div",42),r(1),n()),e&2){let t=p().$implicit;o(),m(t)}}function _t(e,i){e&1&&l(0,dt,2,1,"ng-template",41)}function ut(e,i){if(e&1){let t=b();a(0,"div",33)(1,"div",34)(2,"span"),r(3,"\u0417\u043D\u0430\u0435\u0442\u0435 \u043B\u0438 \u0432\u044B, \u0447\u0442\u043E\u2026"),n(),a(4,"div",35)(5,"i",36),_("click",function(){S(t);let d=F(9);return y(d.prev())}),n(),a(6,"i",37),_("click",function(){S(t);let d=F(9);return y(d.next())}),n()()(),a(7,"div",38)(8,"owl-carousel-o",39,0),l(10,_t,1,0,null,40),n()()()}if(e&2){let t=p();o(8),s("options",t.staffFactsCarouselOptions),o(2),s("ngForOf",t.staffInfo.facts)}}function gt(e,i){if(e&1){let t=b();a(0,"app-staff-film-filter",43),_("filterSelected",function(d){S(t);let et=p();return y(et.setActiveFilter(d))}),n()}if(e&2){let t=i.$implicit,f=p();s("profession",t)("filmCount",f.groupedFilms[t].length)("isActive",t===f.activeFilter())}}function vt(e,i){if(e&1&&(a(0,"div",49),r(1),n()),e&2){let t=p().$implicit;o(),c("\u0420\u0435\u0439\u0442\u0438\u043D\u0433: ",t.rating,"")}}function xt(e,i){if(e&1&&(a(0,"div",50),r(1),n()),e&2){let t=p().$implicit;o(),c("\u0420\u043E\u043B\u044C: ",t.description,"")}}function Ct(e,i){if(e&1&&(a(0,"div",44)(1,"div",45)(2,"p"),r(3),n()(),l(4,vt,2,1,"div",46)(5,xt,2,1,"div",47),a(6,"a",48),r(7,"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"),n()()),e&2){let t=i.$implicit;o(3),T("",t.nameRu," (",t.nameEn,")"),o(),s("ngIf",t.rating),o(),s("ngIf",t.description),o(),s("routerLink","/film/"+t.filmId)}}var O=class e{staffService=v(Y);activatedRoute=v(W);_snackBar=v(G);staffInfo;destroy$=new D;showMore=!1;moreInfoButtonText="\u0412\u0441\u0435 \u0434\u0435\u0442\u0430\u043B\u0438 \u043E \u043F\u0435\u0440\u0441\u043E\u043D\u0435";spouseType="";groupedFilms={};staffProfessions=[];staffFactsCarouselOptions={mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,margin:20,responsive:{0:{items:1},500:{items:2}}};activeFilter=z("");constructor(){this.staffInfo={personId:0,webUrl:"",nameRu:"",nameEn:"",sex:"",posterUrl:"",growth:0,birthday:"",death:"",age:0,birthplace:"",deathplace:"",hasAwards:0,profession:"",facts:[""],spouses:[{personId:0,name:"",divorced:!1,divorcedReason:"",sex:"",children:0,webUrl:"",relation:""}],films:[{filmId:0,nameRu:"",nameEn:"",rating:"",general:!1,description:"",professionKey:""}]}}ngOnInit(){this.activatedRoute.params.pipe(w(this.destroy$)).subscribe(i=>{this.getStaffInfoData(i.staffId)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getStaffInfoData(i){this.staffService.getStaffInfo(i).pipe(w(this.destroy$)).subscribe({next:t=>{this.catchErrorInResponse(t),this.staffInfo=t,this.spouseType=this.staffInfo.sex==="MALE"?"\u0421\u0443\u043F\u0440\u0443\u0433\u0430":"\u0421\u0443\u043F\u0440\u0443\u0433",this.groupFilmsByProfession(),this.staffProfessions=Array.from(new Set(this.staffInfo.films.map(f=>f.professionKey))),this.activeFilter.set(this.staffProfessions[0])},error:t=>{t.error&&t.error.message?this._snackBar.open(t.error.message):this._snackBar.open("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445")}})}catchErrorInResponse(i){let t=null;if(i.message!==void 0&&(t=i.message),t)throw this._snackBar.open(t),new Error(t)}showMoreAction(){this.showMore=!this.showMore,this.moreInfoButtonText=this.showMore?"\u0421\u043A\u0440\u044B\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u0438":"\u0412\u0441\u0435 \u0434\u0435\u0442\u0430\u043B\u0438 \u043E \u043F\u0435\u0440\u0441\u043E\u043D\u0435"}groupFilmsByProfession(){this.staffInfo.films&&this.staffInfo.films.length>0&&(this.groupedFilms=this.staffInfo.films.reduce((i,t)=>(i[t.professionKey]||(i[t.professionKey]=[]),i[t.professionKey].push(t),i),{}))}setActiveFilter(i){this.activeFilter.set(i)}getFilteredFilms(){}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=x({type:e,selectors:[["app-staff-page"]],decls:31,vars:19,consts:[["OwlCarStaffFacts",""],[1,"staff"],[1,"container"],[1,"staff__inner"],[1,"staff__main"],[1,"staff__main-image"],["alt","Staff photo",3,"src"],[1,"staff__main-info"],[1,"staff__name"],[1,"staff__profession"],[1,"staff__birthdate"],["class","staff__growth",4,"ngIf"],["class","staff__more-info",4,"ngIf"],[1,"btn","more-info",3,"click"],["class","staff__facts",4,"ngIf"],[1,"staff__films"],[1,"staff__films-title"],[1,"staff__films-filter"],[3,"profession","filmCount","isActive","filterSelected",4,"ngFor","ngForOf"],[1,"staff__films-items"],["class","film-item",4,"ngFor","ngForOf"],[1,"staff__growth"],[1,"staff__more-info"],[1,"info-item"],[1,"info-item__name"],[1,"info-item__value"],["class","info-item",4,"ngIf"],["class","info-item__value",4,"ngFor","ngForOf"],[1,"spouse"],[1,"spouse__name"],[1,"spouse__children"],["class","spouse__divorced",4,"ngIf"],[1,"spouse__divorced"],[1,"staff__facts"],[1,"staff__facts-title"],[1,"carousel-arrows"],[1,"pi","pi-arrow-left",2,"font-size","18px",3,"click"],[1,"pi","pi-arrow-right",2,"font-size","18px",3,"click"],[1,"staff__facts-items"],[3,"options"],[4,"ngFor","ngForOf"],["carouselSlide",""],[1,"staff__facts-item","info-block"],[3,"filterSelected","profession","filmCount","isActive"],[1,"film-item"],[1,"film-item__name"],["class","film-item__rating",4,"ngIf"],["class","film-item__role",4,"ngIf"],[3,"routerLink"],[1,"film-item__rating"],[1,"film-item__role"]],template:function(t,f){t&1&&(a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),j(5,"img",6),n(),a(6,"div",7)(7,"div",8)(8,"p"),r(9),n(),a(10,"p"),r(11),n()(),a(12,"div",9),r(13),n(),a(14,"div",10)(15,"span"),r(16),u(17,"date"),u(18,"ageFormat"),n()(),l(19,at,2,1,"div",11),n(),l(20,ct,24,15,"div",12),a(21,"button",13),_("click",function(){return f.showMoreAction()}),r(22),n()(),l(23,ut,11,2,"div",14),a(24,"div",15)(25,"div",16),r(26,"\u0424\u0438\u043B\u044C\u043C\u043E\u0433\u0440\u0430\u0444\u0438\u044F"),n(),a(27,"div",17),l(28,gt,1,3,"app-staff-film-filter",18),n(),a(29,"div",19),l(30,Ct,8,5,"div",20),n()()()()()),t&2&&(o(5),V("src",f.staffInfo.posterUrl,$),o(4),m(f.staffInfo.nameRu),o(2),m(f.staffInfo.nameEn),o(2),c(" ",f.staffInfo.profession," "),o(3),T("",h(17,12,f.staffInfo.birthday,"dd MMMM, yyyy","","ru-Ru")," \u2022 ",R(18,17,f.staffInfo.age),""),o(3),s("ngIf",f.staffInfo.growth>0),o(),s("ngIf",f.showMore),o(2),m(f.moreInfoButtonText),o(),s("ngIf",f.staffInfo.growth>0),o(5),s("ngForOf",f.staffProfessions),o(2),s("ngForOf",f.groupedFilms[f.activeFilter()]))},dependencies:[K,U,q,Q,J,P,L,M],styles:["[_ngcontent-%COMP%]:root{--color-white: #E8E8E8;--color-gray: #666666;--color-green: #3DD2CC;--color-bg: #000000;--color-bg-secondary: #121212;--transition-style: all .3s ease;--color-purple: #6200EE}.staff[_ngcontent-%COMP%]{padding-top:var(--container);max-width:744px;margin:0 auto}@media (min-width: 1600px){.staff[_ngcontent-%COMP%]{padding-top:20px}}.staff__main[_ngcontent-%COMP%]{display:grid}.staff__main-image[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.staff__main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:70%;border-radius:5px}@media (min-width: 744px){.staff__main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px}}.staff__main-info[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;gap:10px;margin-bottom:20px}.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]{display:grid;gap:20px}.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-size:20px}@media (min-width: 744px){.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-size:30px}}.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{font-size:15px}.staff__more-info[_ngcontent-%COMP%]{display:grid;gap:16px;margin-bottom:20px}.staff__more-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:120px 1fr}.staff__more-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:nth-child(3)   .info-item__value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.staff__more-info[_ngcontent-%COMP%]   .info-item__name[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--color-gray)}.staff__more-info[_ngcontent-%COMP%]   .info-item__value[_ngcontent-%COMP%]   .spouse[_ngcontent-%COMP%]{display:grid;gap:5px}.staff__more-info[_ngcontent-%COMP%]   .info-item__value[_ngcontent-%COMP%]   .spouse__children[_ngcontent-%COMP%], .staff__more-info[_ngcontent-%COMP%]   .info-item__value[_ngcontent-%COMP%]   .spouse__divorced[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.more-info[_ngcontent-%COMP%]{justify-self:center}.staff__facts-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:16px 0 20px}.staff__facts-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}.staff__facts-title[_ngcontent-%COMP%]   .carousel-arrows[_ngcontent-%COMP%]{display:flex;align-items:center;gap:30px}.staff__facts-items[_ngcontent-%COMP%]   .staff__facts-item[_ngcontent-%COMP%]{overflow-y:auto;min-height:120px;max-height:120px}.staff__films-title[_ngcontent-%COMP%]{font-size:20px;margin-bottom:16px}.staff__films-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-wrap:nowrap;overflow-x:auto;margin-bottom:16px}.staff__films-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.staff__films-items[_ngcontent-%COMP%]   .film-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;background-color:var(--color-bg-secondary);border-radius:5px;padding:10px}.staff__films-items[_ngcontent-%COMP%]   .film-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:15px;text-decoration:underline}"]})};var St=[{path:"staff/:staffId",component:O}],E=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=C({type:e});static \u0275inj=g({imports:[k.forChild(St),k]})};var tt=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=C({type:e});static \u0275inj=g({imports:[H,E,X,Z]})};export{tt as a};
