import{$ as q,A as d,B as l,C as K,D as f,E as p,F as c,G as b,H as _,I as w,K as C,L,O as U,P as H,Q as V,S as W,a as T,ca as G,e as E,ea as F,g as u,i as g,j as v,k as x,l as R,m as D,n as k,o as A,q as B,r as n,s as $,sa as J,t as m,u as s,v as N,va as P,w as a,wa as Q,x as o,xa as X,y as j,ya as Y,z}from"./chunk-Y2FF3C6H.js";var h=class e{profession="";filmCount=0;isActive=!1;filterSelected=new A;translatedStaffProfessions={ACTOR:"\u0410\u043A\u0442\u0435\u0440",PRODUCER:"\u041F\u0440\u043E\u0434\u044E\u0441\u0435\u0440",DIRECTOR:"\u0420\u0435\u0436\u0438\u0441\u0441\u0435\u0440",WRITER:"\u0421\u0446\u0435\u043D\u0430\u0440\u0438\u0441\u0442",HRONO_TITR_MALE:"\u0410\u043A\u0442\u0435\u0440: \u0425\u0440\u043E\u043D\u0438\u043A\u0430, \u0432 \u0442\u0438\u0442\u0440\u0430\u0445 \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D",HIMSELF:"\u0410\u043A\u0442\u0435\u0440, \u0438\u0433\u0440\u0430\u0435\u0442 \u0441\u0430\u043C\u043E\u0433\u043E \u0441\u0435\u0431\u044F",HERSELF:"\u0410\u043A\u0442\u0440\u0438\u0441\u0430, \u0438\u0433\u0440\u0430\u0435\u0442 \u0441\u0430\u043C\u0443 \u0441\u0435\u0431\u044F"};constructor(){}ngOnInit(){}selectFilter(){this.filterSelected.emit(this.profession)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-staff-film-filter"]],inputs:{profession:"profession",filmCount:"filmCount",isActive:"isActive"},outputs:{filterSelected:"filterSelected"},decls:4,vars:4,consts:[[1,"filter__item","info-block",3,"click"]],template:function(t,r){t&1&&(a(0,"div",0),d("click",function(){return r.selectFilter()}),f(1),a(2,"span"),f(3),o()()),t&2&&(N("active",r.isActive),n(),c(" ",r.translatedStaffProfessions[r.profession]," "),n(2),p(r.filmCount))},styles:["[_ngcontent-%COMP%]:root{--color-white: #E8E8E8;--color-gray: #666666;--color-green: #3DD2CC;--color-bg: #000000;--color-bg-secondary: #121212;--transition-style: all .3s ease;--color-purple: #6200EE}.filter__item[_ngcontent-%COMP%]{white-space:nowrap}.filter__item.active[_ngcontent-%COMP%]{background-color:var(--color-gray);color:var(--color-bg)}.filter__item.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:var(--color-bg);color:var(--color-white)}.filter__item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;font-size:14px;color:var(--color-bg);padding:5px;background:var(--color-white);border-radius:3px;margin-left:5px}"]})};var M=class e{transform(i){if(!i)return"";let t=i%10,r=i%100;if(t>11&&t<=19)return`${i} \u043B\u0435\u0442`;switch(t){case 1:return`${i} \u0433\u043E\u0434`;case 2:case 3:case 4:return`${i} \u0433\u043E\u0434\u0430`;default:return`${i} \u043B\u0435\u0442`}}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=R({name:"ageFormat",type:e,pure:!0})};function ot(e,i){if(e&1&&(a(0,"div",21),f(1),o()),e&2){let t=l();n(),c("",t.staffInfo.growth/100," \u043C")}}function at(e,i){if(e&1&&(a(0,"div",23)(1,"div",24),f(2,"\u0420\u043E\u0441\u0442"),o(),a(3,"div",25),f(4),o()()),e&2){let t=l(2);n(4),c("",t.staffInfo.growth/100," \u043C")}}function ft(e,i){if(e&1&&(a(0,"div",23)(1,"div",24),f(2,"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F"),o(),a(3,"div",25),f(4),_(5,"date"),a(6,"span"),f(7),_(8,"ageFormat"),o()()()),e&2){let t=l(2);n(4),c("",C(5,2,t.staffInfo.birthday,"dd MMMM, yyyy","","ru-Ru")," \u2022 "),n(3),p(w(8,7,t.staffInfo.age))}}function rt(e,i){if(e&1&&(a(0,"div",23)(1,"div",24),f(2,"\u041C\u0435\u0441\u0442\u043E \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F"),o(),a(3,"div",25),f(4),o()()),e&2){let t=l(2);n(4),p(t.staffInfo.birthplace)}}function st(e,i){if(e&1&&(a(0,"div",23)(1,"div",24),f(2,"\u0414\u0430\u0442\u0430 \u0441\u043C\u0435\u0440\u0442\u0438"),o(),a(3,"div",25),f(4),_(5,"date"),o()()),e&2){let t=l(2);n(4),p(C(5,1,t.staffInfo.death,"dd MMMM, yyyy","","ru-Ru"))}}function lt(e,i){if(e&1&&(a(0,"div",23)(1,"div",24),f(2,"\u041C\u0435\u0441\u0442\u043E \u0441\u043C\u0435\u0440\u0442\u0438"),o(),a(3,"div",25),f(4),o()()),e&2){let t=l(2);n(4),p(t.staffInfo.deathplace)}}function pt(e,i){e&1&&(a(0,"div",32),f(1,"\u0412 \u0440\u0430\u0437\u0432\u043E\u0434\u0435"),o())}function mt(e,i){if(e&1&&(a(0,"div",28)(1,"div",29),f(2),o(),a(3,"div",30),f(4),o(),m(5,pt,2,0,"div",31),o()),e&2){let t=i.$implicit;n(2),p(t.name),n(2),c("\u0414\u0435\u0442\u0435\u0439: ",t.children,""),n(),s("ngIf",t.divorced)}}function ct(e,i){if(e&1&&(a(0,"div",23)(1,"div",24),f(2),o(),a(3,"div",25),m(4,mt,6,3,"div",27),o()()),e&2){let t=l(2);n(2),p(t.spouseType),n(2),s("ngForOf",t.staffInfo.spouses)}}function _t(e,i){if(e&1&&(a(0,"div",22)(1,"div",23)(2,"div",24),f(3,"\u041A\u0430\u0440\u044C\u0435\u0440\u0430"),o(),a(4,"div",25),f(5),o()(),m(6,at,5,1,"div",26)(7,ft,9,9,"div",26)(8,rt,5,1,"div",26)(9,st,6,6,"div",26)(10,lt,5,1,"div",26)(11,ct,5,2,"div",26),o()),e&2){let t=l();n(5),c("",t.staffInfo.profession,"\u0442"),n(),s("ngIf",t.staffInfo.growth>0),n(),s("ngIf",t.staffInfo.birthday),n(),s("ngIf",t.staffInfo.birthplace),n(),s("ngIf",t.staffInfo.death),n(),s("ngIf",t.staffInfo.deathplace),n(),s("ngIf",t.staffInfo.spouses.length>0)}}function dt(e,i){if(e&1&&(a(0,"div",37)(1,"p"),f(2),o()()),e&2){let t=i.$implicit;n(2),p(t)}}function ut(e,i){if(e&1&&(a(0,"div",33)(1,"div",34)(2,"span"),f(3,"\u0417\u043D\u0430\u0435\u0442\u0435 \u043B\u0438 \u0432\u044B, \u0447\u0442\u043E\u2026"),o()(),a(4,"div",35)(5,"p-carousel",36),m(6,dt,3,1,"ng-template",null,0,L),o()()()),e&2){let t=l();n(5),s("value",t.staffInfo.facts)("numScroll",1)("numVisible",1.2)("circular",!1)("showNavigators",!1)}}function gt(e,i){if(e&1){let t=z();a(0,"app-staff-film-filter",38),d("filterSelected",function(O){D(t);let tt=l();return k(tt.setActiveFilter(O))}),o()}if(e&2){let t=i.$implicit,r=l();s("profession",t)("filmCount",r.groupedFilms[t].length)("isActive",t===r.activeFilter())}}function vt(e,i){if(e&1&&(a(0,"div",44),f(1),o()),e&2){let t=l().$implicit;n(),c("\u0420\u0435\u0439\u0442\u0438\u043D\u0433: ",t.rating,"")}}function xt(e,i){if(e&1&&(a(0,"div",45),f(1),o()),e&2){let t=l().$implicit;n(),c("\u0420\u043E\u043B\u044C: ",t.description,"")}}function Ct(e,i){if(e&1&&(a(0,"div",39)(1,"div",40)(2,"p"),f(3),o()(),m(4,vt,2,1,"div",41)(5,xt,2,1,"div",42),a(6,"a",43),f(7,"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"),o()()),e&2){let t=i.$implicit;n(3),b("",t.nameRu," (",t.nameEn,")"),n(),s("ngIf",t.rating),n(),s("ngIf",t.description),n(),s("routerLink","/film/"+t.filmId)}}var I=class e{staffService=g(Q);activatedRoute=g(q);_snackBar=g(J);staffInfo;destroy$=new T;showMore=!1;moreInfoButtonText="\u0412\u0441\u0435 \u0434\u0435\u0442\u0430\u043B\u0438 \u043E \u043F\u0435\u0440\u0441\u043E\u043D\u0435";spouseType="";groupedFilms={};staffProfessions=[];staffFactsCarouselOptions={mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,margin:20,responsive:{0:{items:1},500:{items:2}}};activeFilter=$("");constructor(){this.staffInfo={personId:0,webUrl:"",nameRu:"",nameEn:"",sex:"",posterUrl:"",growth:0,birthday:"",death:"",age:0,birthplace:"",deathplace:"",hasAwards:0,profession:"",facts:[""],spouses:[{personId:0,name:"",divorced:!1,divorcedReason:"",sex:"",children:0,webUrl:"",relation:""}],films:[{filmId:0,nameRu:"",nameEn:"",rating:"",general:!1,description:"",professionKey:""}]}}ngOnInit(){this.activatedRoute.params.pipe(E(this.destroy$)).subscribe(i=>{this.getStaffInfoData(i.staffId)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getStaffInfoData(i){this.staffService.getStaffInfo(i).pipe(E(this.destroy$)).subscribe({next:t=>{this.catchErrorInResponse(t),this.staffInfo=t,this.spouseType=this.staffInfo.sex==="MALE"?"\u0421\u0443\u043F\u0440\u0443\u0433\u0430":"\u0421\u0443\u043F\u0440\u0443\u0433",this.groupFilmsByProfession(),this.staffProfessions=Array.from(new Set(this.staffInfo.films.map(r=>r.professionKey))),this.activeFilter.set(this.staffProfessions[0])},error:t=>{t.error&&t.error.message?this._snackBar.open(t.error.message):this._snackBar.open("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445")}})}catchErrorInResponse(i){let t=null;if(i.message!==void 0&&(t=i.message),t)throw this._snackBar.open(t),new Error(t)}showMoreAction(){this.showMore=!this.showMore,this.moreInfoButtonText=this.showMore?"\u0421\u043A\u0440\u044B\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u0438":"\u0412\u0441\u0435 \u0434\u0435\u0442\u0430\u043B\u0438 \u043E \u043F\u0435\u0440\u0441\u043E\u043D\u0435"}groupFilmsByProfession(){this.staffInfo.films&&this.staffInfo.films.length>0&&(this.groupedFilms=this.staffInfo.films.reduce((i,t)=>(i[t.professionKey]||(i[t.professionKey]=[]),i[t.professionKey].push(t),i),{}))}setActiveFilter(i){this.activeFilter.set(i)}getFilteredFilms(){}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-staff-page"]],decls:31,vars:19,consts:[["item",""],[1,"staff"],[1,"container"],[1,"staff__inner"],[1,"staff__main"],[1,"staff__main-image"],["alt","Staff photo",3,"src"],[1,"staff__main-info"],[1,"staff__name"],[1,"staff__profession"],[1,"staff__birthdate"],["class","staff__growth",4,"ngIf"],["class","staff__more-info",4,"ngIf"],[1,"btn","more-info",3,"click"],["class","staff__facts",4,"ngIf"],[1,"staff__films"],[1,"staff__films-title"],[1,"staff__films-filter"],[3,"profession","filmCount","isActive","filterSelected",4,"ngFor","ngForOf"],[1,"staff__films-items"],["class","film-item",4,"ngFor","ngForOf"],[1,"staff__growth"],[1,"staff__more-info"],[1,"info-item"],[1,"info-item__name"],[1,"info-item__value"],["class","info-item",4,"ngIf"],["class","spouse",4,"ngFor","ngForOf"],[1,"spouse"],[1,"spouse__name"],[1,"spouse__children"],["class","spouse__divorced",4,"ngIf"],[1,"spouse__divorced"],[1,"staff__facts"],[1,"staff__facts-title"],[1,"staff__facts-items"],[3,"value","numScroll","numVisible","circular","showNavigators"],[1,"staff__facts-item","info-block"],[3,"filterSelected","profession","filmCount","isActive"],[1,"film-item"],[1,"film-item__name"],["class","film-item__rating",4,"ngIf"],["class","film-item__role",4,"ngIf"],[3,"routerLink"],[1,"film-item__rating"],[1,"film-item__role"]],template:function(t,r){t&1&&(a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),j(5,"img",6),o(),a(6,"div",7)(7,"div",8)(8,"p"),f(9),o(),a(10,"p"),f(11),o()(),a(12,"div",9),f(13),o(),a(14,"div",10)(15,"span"),f(16),_(17,"date"),_(18,"ageFormat"),o()(),m(19,ot,2,1,"div",11),o(),m(20,_t,12,7,"div",12),a(21,"button",13),d("click",function(){return r.showMoreAction()}),f(22),o()(),m(23,ut,8,5,"div",14),a(24,"div",15)(25,"div",16),f(26,"\u0424\u0438\u043B\u044C\u043C\u043E\u0433\u0440\u0430\u0444\u0438\u044F"),o(),a(27,"div",17),m(28,gt,1,3,"app-staff-film-filter",18),o(),a(29,"div",19),m(30,Ct,8,5,"div",20),o()()()()()),t&2&&(n(5),K("src",r.staffInfo.posterUrl,B),n(4),p(r.staffInfo.nameRu),n(2),p(r.staffInfo.nameEn),n(2),c(" ",r.staffInfo.profession," "),n(3),b("",C(17,12,r.staffInfo.birthday,"dd MMMM, yyyy","","ru-Ru")," \u2022 ",w(18,17,r.staffInfo.age),""),n(3),s("ngIf",r.staffInfo.growth>0),n(),s("ngIf",r.showMore),n(2),p(r.moreInfoButtonText),n(),s("ngIf",r.staffInfo.facts.length>0),n(5),s("ngForOf",r.staffProfessions),n(2),s("ngForOf",r.groupedFilms[r.activeFilter()]))},dependencies:[U,H,G,h,P,V,M],styles:["[_ngcontent-%COMP%]:root{--color-white: #E8E8E8;--color-gray: #666666;--color-green: #3DD2CC;--color-bg: #000000;--color-bg-secondary: #121212;--transition-style: all .3s ease;--color-purple: #6200EE}.staff[_ngcontent-%COMP%]{padding:var(--container) 0;max-width:744px;margin:0 auto}@media (min-width: 1600px){.staff[_ngcontent-%COMP%]{padding-top:20px}}.staff__main[_ngcontent-%COMP%]{display:grid}.staff__main-image[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.staff__main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:70%;border-radius:5px}@media (min-width: 744px){.staff__main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px}}.staff__main-info[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;gap:10px;margin-bottom:20px}.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]{display:grid;gap:20px}.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-size:20px}@media (min-width: 744px){.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-size:30px}}.staff__main-info[_ngcontent-%COMP%]   .staff__name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{font-size:15px}.staff__more-info[_ngcontent-%COMP%]{display:grid;gap:16px;margin-bottom:20px}.staff__more-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:120px 1fr}.staff__more-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:nth-child(3)   .info-item__value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.staff__more-info[_ngcontent-%COMP%]   .info-item__name[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--color-gray)}.staff__more-info[_ngcontent-%COMP%]   .info-item__value[_ngcontent-%COMP%]   .spouse[_ngcontent-%COMP%]{display:grid;gap:5px}.staff__more-info[_ngcontent-%COMP%]   .info-item__value[_ngcontent-%COMP%]   .spouse[_ngcontent-%COMP%] + .spouse[_ngcontent-%COMP%]{margin-top:10px}.staff__more-info[_ngcontent-%COMP%]   .info-item__value[_ngcontent-%COMP%]   .spouse__children[_ngcontent-%COMP%], .staff__more-info[_ngcontent-%COMP%]   .info-item__value[_ngcontent-%COMP%]   .spouse__divorced[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.more-info[_ngcontent-%COMP%]{justify-self:center}.staff__facts[_ngcontent-%COMP%]{margin-top:16px}.staff__facts-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:16px 0 20px}.staff__facts-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}.staff__facts-title[_ngcontent-%COMP%]   .carousel-arrows[_ngcontent-%COMP%]{display:flex;align-items:center;gap:30px}.staff__facts-items[_ngcontent-%COMP%]   .staff__facts-item[_ngcontent-%COMP%]{min-height:120px;max-height:120px;margin-bottom:0}.staff__facts-items[_ngcontent-%COMP%]   .staff__facts-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow-y:auto;max-height:100px}.staff__films[_ngcontent-%COMP%]{margin-top:16px}.staff__films-title[_ngcontent-%COMP%]{font-size:20px;margin-bottom:16px}.staff__films-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-wrap:nowrap;overflow-x:auto;margin-bottom:16px}.staff__films-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.staff__films-items[_ngcontent-%COMP%]   .film-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;background-color:var(--color-bg-secondary);border-radius:5px;padding:10px}.staff__films-items[_ngcontent-%COMP%]   .film-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:15px;text-decoration:underline}"]})};var Pt=[{path:"staff/:staffId",component:I}],S=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=x({type:e});static \u0275inj=u({imports:[F.forChild(Pt),F]})};var Z=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=x({type:e});static \u0275inj=u({imports:[W,S,X,Y,P]})};export{Z as a};
